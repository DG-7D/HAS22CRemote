# HA-S22C リモコン解析

HA-S22C付属のリモコンの信号を解析したもの。

## 赤外線プロトコル

NECプロトコルの拡張?

- T: 562 μs
- リーダーコード: H 16T (8992 μs), L 8T (4496 μs)
- データ0: H 1T (562 μs), L 1T (562 μs)
- データ1: H 1T (562 μs), L 3T (1686 μs)
- データ終端: H 1T (562 μs), L ∞
- 繰り返し信号: なし

## データ

送信はバイト0、ビット0から

| Byte | Bit 7 | Bit 6 | Bit 5 | Bit 4 | Bit 3 | Bit 2 | Bit 1 | Bit 0 (先頭) |
|------|-------|-------|-------|-------|-------|-------|-------|-------|
| 0 | 0 | 1 | 1 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 0 | 1 | 1 | 1 | 0 | 0 | 0 |
| 2 | 0 | 0 | 0 | 1 | 0 | 0 | 1 | 1 |
| 3 | 0 | 0 | 0 | 0 | モード[2] | [1] | [0] | 運転 |
| 4 | 0 | 風量[6] | [5] | [4] | [3] | [2] | [1] | [0] |
| 5 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 6 | 温度A[7] | [6] | [5] | [4] | [3] | [2] | [1] | [0] |
| 7 | 0 | 0 | 0 | 0 | 0 | 温度B[2] | [1] | [0] |
| 8 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 9 | 0 | 0 | 0 | 0 | 0 | おやすみ | 0 | 0 |
| 10 | パワーセーブ | 0 | 0 | 時[4] | [3] | [2] | [1] | [0] |
| 11 | 0 | 0 | 分[5] | [4] | [3] | [2] | [1] | [0] |
| 12 | 0 | 内部クリーン | 切タイマ | 切時[4] | [3] | [2] | [1] | [0] |
| 13 | 0 | 0 | 切分[5] | [4] | [3] | [2] | [1] | [0] |
| 14 | 0 | 0 | 入タイマ | 入時[4] | [3] | [2] | [1] | [0] |
| 15 | 0 | 0 | 入分[5] | [4] | [3] | [2] | [1] | [0] |
| 16 | 0 | 0 | 0 | 0 | 風向上下 | 0 | 0 | 0 |
| 17 | 0 | 0 | 0 | 0 | 0 | 風向左右[1] | [0] | 1 |
| 18 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 19 | 0 | 0 | 0 | 押下ボタン[4] | [3] | [2] | [1] | [0] |
| 20 | 0 | 0 | 点検コード[5] | [4] | [3] | [2] | [1] | [0] |
| 21 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 22 | チェックサム[7] | [6] | [5] | [4] | [3] | [2] | [1] | [0] |

### 運転

| 0 | 意味 |
|------|------|
| 0 | 停止 |
| 1 | 運転 |

### モード

| 2 | 1 | 0 | 意味 |
|---|---|---|------|
| 0 | 0 | 0 | 暖房 |
| 0 | 0 | 1 | 自動 |
| 0 | 1 | 0 | 冷房 |
| 0 | 1 | 1 | 除湿 |
| 1 | 0 | 0 | 送風 |

### 風量

| 6 | 5 | 4 | 3 | 2 | 1 | 0 | 数値 | 意味 |
|---|---|---|---|---|---|---|----|------|
| 0 | 0 | 0 | 0 | 0 | 0 | 1 | 1 | しずか |
| 0 | 0 | 0 | 1 | 0 | 1 | 0 | 10 | 1 |
| 0 | 1 | 0 | 1 | 1 | 0 | 1 | 45 | 2 |
| 1 | 0 | 0 | 0 | 0 | 0 | 1 | 65 | 3 |
| 1 | 0 | 1 | 1 | 0 | 1 | 0 | 90 | 4 |
| 1 | 1 | 0 | 0 | 1 | 0 | 0 | 100 | パワフル |
| 1 | 1 | 1 | 1 | 1 | 1 | 1 | 127 | 自動 |

<!-- 任意の値をとれるか要調査 -->

### 温度A

冷房、暖房の温度。`0`(16.0 °C)から`140`(30.0 °C)まで、`5`(0.5 °C)刻み。

| 7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 | 数値 | 温度 | 他 |
|---|---|---|---|---|---|---|---|----|------|---|
| 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |   0 | 16.0 | |
| 0 | 0 | 0 | 0 | 0 | 1 | 0 | 1 |   5 | 16.5 | |
| 0 | 0 | 0 | 1 | 1 | 1 | 1 | 0 |  30 | 19.0 | 送風 |
| 0 | 1 | 0 | 1 | 1 | 0 | 1 | 0 |  90 | 25.0 | 自動/除湿 |
| 1 | 0 | 0 | 0 | 1 | 1 | 0 | 0 | 140 | 30.0 | |

<!-- 任意の値をとれるか要調査 -->

### 温度B

自動、除湿の温度。

| 2 | 1 | 0 | 温度 | 他 |
|---|---|---|------|---|
| 1 | 1 | 0 | -2 ||
| 1 | 0 | 1 | -1 ||
| 0 | 0 | 0 | 標準 | 冷房/暖房/送風 |
| 0 | 0 | 1 | +1 ||
| 0 | 1 | 0 | +2 || 

### おやすみ

| 0 | 意味 |
|---|------|
| 0 | おやすみモード切 |
| 1 | おやすみモード入 |

### パワーセーブ

| 0 | 意味 |
|---|------|
| 0 | パワーセーブ切 |
| 1 | パワーセーブ入 |

### 内部クリーン

冷房、除湿時のみ入になり、自動、暖房、送風時は直前の状態によらず切になる。

| 0 | 意味 |
|---|------|
| 0 | 内部クリーン切 |
| 1 | 内部クリーン入 |

### 現在時刻、タイマ時刻

#### 時

おそらく0時から23時まで。

| 4 | 3 | 2 | 1 | 0 | 数値 (時) |
|---|---|---|---|---|----|
| 0 | 0 | 0 | 0 | 0 | 0 | 0時 |
| 1 | 0 | 1 | 1 | 1 | 23 | 23時 |

#### 分

おそらく0分から59分まで。

| 5 | 4 | 3 | 2 | 1 | 0 | 数値 (分) |
|---|---|---|---|---|---|----|
| 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 1 | 1 | 0 | 1 | 1 | 59 |

### 風向上下

| 0 | 意味 |
|---|------|
| 0 | 自動 |
| 1 | 停止 |

### 風向左右

| 1 | 0 | 意味 |
|---|---|------|
| 0 | 1 | 自動 |
| 1 | 0 | 停止 |

### 押下ボタン

| 4 | 3 | 2 | 1 | 0 | 意味 |
|---|---|---|---|---|------|
| 0 | 0 | 0 | 0 | 0 | 除湿、送風、タイマ取消(長押し: 点検)、パワーセーブ(入+切+取消) |
| 0 | 0 | 0 | 0 | 1 | 停止 |
| 0 | 0 | 0 | 1 | 0 | 温度+、温度- |
| 0 | 0 | 0 | 1 | 1 | おやすみ |
| 0 | 0 | 1 | 0 | 1 | 入タイマ |
| 0 | 0 | 1 | 1 | 0 | 冷房、暖房 |
| 0 | 0 | 1 | 1 | 1 | 風向上下 |
| 0 | 1 | 0 | 0 | 0 | 風向左右 |
| 0 | 1 | 1 | 0 | 0 | ECO |
| 1 | 0 | 0 | 0 | 1 | 風量 |
| 1 | 0 | 1 | 1 | 1 | 自動 |
| 1 | 1 | 0 | 0 | 0 | 内部クリーン |
| 1 | 1 | 1 | 0 | 1 | 切タイマ |

### 点検コード

`0`から`49`まで。

| 5 | 4 | 3 | 2 | 1 | 0 | 数値 (コード) |
|---|---|---|---|---|---|----------------|
| 0 | 0 | 0 | 0 | 0 | 0 | なし |
| 0 | 0 | 0 | 0 | 0 | 1 | 01 |
| 1 | 1 | 0 | 0 | 0 | 1 | 49 |

「取消」長押しで1づつ増加する。取扱説明書では「00」でも送信される(応答がある)とされ、リモコンの表示も「00」から始まるが、このとき信号は送信されない。送ったとしても通常時の信号と区別できないため応答しようがない。後のモデルの取説では「00」は言及されていないのでおそらく取説の誤記。

### チェックサム

バイト3からバイト21までのビットごとのXOR。

## 特殊な動作

基本的には送信した「状態」に合致するように動作するが、一部の状態には特定の条件でのみ遷移する。

- 内部クリーン: 冷房/除湿運転中、内部クリーン=入かつ押下ボタン=停止の信号により停止した際のみ内部クリーンが動作する。
- 解凍洗浄: 運転=停止かつ押下ボタン=内部クリーンの信号で開始される。取説には『停止待機状態で』とあるが、これはリモコン側の制限であり、本体が運転中でもこの信号で移行する。

また、チャンネル切替機能は不可逆なため検証していない。

## 対応機種

[同じリモコン](https://www.hisense.co.jp/parts/detail/?id=25)を使用する以下の製品はほぼ確実に同様。

- HA-S22A-W
- HA-S22AE7-W
- HA-S25A-W
- HA-S28A-W
- HA-S28AE7-W
- HA-S40C2-W
- HA-S40C2E8-W
- HA-S22CE8-W
- HA-S28CE8-W
- HA-S22C-W
- HA-S25C-W
- HA-S28C-W
- HA-S22CY-W
- HA-S25CY-W
- HA-S28CY-W
- HA-S40C2Y-W
- HA-S25D-W
- HA-S28DE9-W
- HA-S28D-W
- HA-S40D2-W
- HA-S40D2E9-W
- HA-S22DE9-W
- HA-S22D-W

型番が同じで部品番号が違う[謎のリモコン](https://www.hisense.co.jp/parts/detail/?id=27)を使用する以下の製品もおそらく同様。[謎プロジェクト](https://www.amadana.com/taglabelaircon)向け製品っぽく、違いはロゴがないことだけだと思われる。

- AT-HA2211-W
- AT-HA2511-W
- AT-HA2811-W
- AT-HA4011-W
- AT-HA2212-W
- AT-HA2812-W

これより後のSシリーズの製品もおそらく同様。(ECOと解凍洗浄のボタンが異なるのみ?)

## 参考

- [取扱説明書](https://www.hisense.co.jp/aircon/ha-s22c-w/assets/img/ha-s40c-2-w_usermanual.pdf)